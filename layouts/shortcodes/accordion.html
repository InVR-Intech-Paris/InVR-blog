{{ $lang := "fr" }} {{ if isset .Params "lang" }} {{ $lang = .Get "lang" }} {{ end }}
{{ $curRange := .Site.Data.qas.fr.values }}

{{ if eq $lang "en"}}
    {{ $curRange = .Site.Data.qas.en.values }}
{{ end }}

<div class="accordion">
    {{ range $curRange }}
        <div class="accordion-item">
            <div class="accordion-item-header">
                <h4>{{ .question }}</h4>
            </div>
            <div class="accordion-item-body">
                <div class="accordion-item-body-content">
                    <p>{{ .answer }}</p>
                </div>
            </div>
        </div>
    {{ end }}
</div>

<script>
    const accordionItemHeaders = document.querySelectorAll(".accordion-item-header");

    accordionItemHeaders.forEach(accordionItemHeader => {
        accordionItemHeader.addEventListener("click", event => {
            accordionItemHeader.classList.toggle("active");
            const accordionItemBody = accordionItemHeader.nextElementSibling;
            if (accordionItemHeader.classList.contains("active")) {
                accordionItemBody.style.maxHeight = accordionItemBody.scrollHeight + "px";
            } else {
                accordionItemBody.style.maxHeight = 0;
            }
        });
    });
</script>
